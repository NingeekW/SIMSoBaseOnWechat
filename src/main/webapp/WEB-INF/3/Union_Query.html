<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="renderer" content="webkit">
<title></title>
<link rel="stylesheet" href="css/pintuer.css">
<link rel="stylesheet" href="css/admin.css">
<style type="text/css">
		#serach:hover{cursor:pointer;background:#cc0099;color:#00ff66;transform:rotate(360deg);transition:0.5s;}
		.wordA:link{color:blue;text-decoration:underline;}
		.wordA:visited{color:#996600;}

</style>
<script src="js/jquery.js"></script>
</head>
<body>

  <div class="panel admin-panel">
    <div class="panel-head"><strong class="icon-reorder"> 合同组合查询</strong> <a href="" style="float:right; display:none;">添加字段</a></div>
    <div class="padding border-bottom">
    <ul class="search" style="padding-left:10px;">
        <li class="input" style="width:200px; line-height:60px;display:inline-block;margin-top:5px">检索词（1项及以上）：</li>
        <li>
          <input id="principal_b" type="text" placeholder="业务专员" name="principal_b" class="input" style="width:185px; line-height:17px;display:inline-block;margin-top:5px" />
          <input id="cont_no" type="text" placeholder="合同编号" name="cont_no" class="input" style="width:185px; line-height:17px;display:inline-block;margin-top:5px" />
          <input id="cont_name" type="text" placeholder="合同名称" name="cont_name" class="input" style="width:185px; line-height:17px;display:inline-block;margin-top:5px" />
          <input id="cont_type" type="text" placeholder="合同类型" name="cont_type" class="input" style="width:185px; line-height:17px;display:inline-block;margin-top:5px" /><br/>
          <input id="depart_id" type="text" placeholder="创建部门" name="depart_id" class="input" style="width:185px; line-height:17px;display:inline-block;margin-top:5px" />
          <input id="state" type="text" placeholder="合同状态" name="state" class="input" style="width:185px; line-height:17px;display:inline-block;margin-top:5px" />
          <input id="oper_a"type="text" placeholder="甲方公司" name="oper_a" class="input" style="width:185px; line-height:17px;display:inline-block;margin-top:5px" />
        </li>
         <li>
          <button  id="serach"  class="button border-main icon-search" style="border-radius:10px;width:120px;margin-top:25px;" >查找</button>
          </li>
          
      </ul>
    </div>
    <table id="table1" class="table table-hover text-center">
    <thead>
      <tr>
        <th width="7%" style="text-align:left; padding-left:20px;">编号</th>
        <th width="7%">名称</th>
        <th width="7%">状态</th>
        <th width="7%">类型</th>
        <th width="7%">收付款类型</th>
        <th width="7%">生效期</th>
        <th width="7%">截至期</th>
        <th width="7%">甲方</th>
        <th width="7%">业务专员</th>
        <th width="7%">总额</th>
        <th width="7%">创建日期</th>
        <th width="7%">部门</th>
        <th width="10%">按钮</th>
      </tr>
      </thead>
      	<tbody id="tbody">
      	<tr>
      		
        </tbody>
        <tfoot>
   		<tr>
        		<!-- <td colspan="13"><div class="pagelist"> <a href="">上一页</a> <span class="current">1</span><a href="">2</a><a href="">3</a><a href="">下一页</a><a href="">尾页</a> </div></td> -->
    	</tr>
    	</tfoot>
    </table>
  </div>

</body>
<script type="text/javascript">
$(function(){
	$("#serach").click(function(){
		var principal_b=$("#principal_b").val();
		var cont_no=$("#cont_no").val();
		var cont_name=$("#cont_name").val();
		var cont_type=$("#cont_type").val();
		var depart_id=$("#depart_id").val();
		var state=$("#state").val();
		var oper_a=$("#oper_a").val();
		var data = "";
		if(principal_b != ""){
			data +=  "principal_b="+principal_b;
		}
		if(cont_no != ""){
			if(data == ""){
				data += "cont_no="+cont_no;
			}else{
				data += "&cont_no="+cont_no;
			}
		}
		if(cont_name != ""){
			if(data == ""){
				data += "cont_name="+cont_name;
			}else{
				data += "&cont_name="+cont_name;
			}
		}
		if(cont_type != ""){
			if(data == ""){
				data += "cont_type="+cont_type;
			}else{
				data += "&cont_type="+cont_type;
			}
		}
		if(depart_id != ""){
			if(data == ""){
				data += "depart_id="+depart_id;
			}else{
				data += "&depart_id="+depart_id;
			}
		}
		if(state != ""){
			if(data == ""){
				data += "state="+state;
			}else{
				data += "&state="+state;
			}
		}
		if(oper_a != ""){
			if(data == ""){
				data += "oper_a="+oper_a;
			}else{
				data += "&oper_a="+oper_a;
			}
		}
		//data = "principal_b="+principal_b+"&cont_no="+cont_no+"&cont_name="
		//			+cont_name+"&cont_type="+cont_type+"&depart_id="+depart_id+"&state="+state+"&oper_a="+oper_a;
		$.ajax({
			type: "GET",
			url: "uQuery.htm",
			data: data,
			error:function(){
				alert("查询失败");
			},
			success: function(msg){
				console.log(msg);
				$("#tbody").empty();
				var contracts = $.parseJSON(msg);
				var trs="";
				for(var i=0;i<contracts.length;i++){
					var e=contracts[i];
					var string="<td>"+e.contNo+"</td>"+
		      		"<td>"+e.contName+"</a></td>"+
		      		"<td>"+e.state+"</td>"+
		      		"<td>"+e.contType+"</td>"+
		      		"<td>"+e.operA+"</td>"+
		      		"<td>"+e.performStartDate+"</td>"+
		      		"<td>"+e.performEndDate+"</td>"+
		      		"<td>"+e.principalA+"</td>"+
		      		"<td>"+e.principalB+"</td>"+
		      		"<td>"+e.totalFund+"</td>"+
		      		"<td>"+e.createDate+"</td>"+
		      		"<td>"+e.departId+"</td>"+
		      		"<td><div class='button-group'> <a style='height:25px;padding:2px;margin-top:5px' class='button border-main'' href='show_all.htm?cid="+e.cid+"'>详情</a> <a class='button border-red' onclick='dele("+e.cid+")' style='height:25px;padding:2px;margin-top:5px' id="+e.cid+">删除</a> </div></td>";
					var elem=document.createElement("TR");
					elem.id="cid"+e.cid;
					elem.innerHTML=string;
					$("#tbody").append(elem);
				}
			}
		});
	});
})

function dele(id){
	var r=confirm("是否删除？");
	if (r==true)
	 {
		data = "cid="+id;
		$("#cid"+id).remove();
		$.ajax({
			type:"GET",
			url:"deleteContract.htm",
			data:data,
			error:function(){
				alert("删除失败");
			},
			success:function(msg){
				alert(msg);
			}
		});
	 }
}
</script>
</html>